# ワークスペースファイル

## ワークスペースフォルダ
ワークスペースはフォルダであり、ダイアグラムの全てのデータはそこへ保存されます。

![](/assets/workspace-files.png)

ワークスペース内のファイル名とフォルダ名(ワークスペースフォルダ自体は除く)はダイアグラムを開くために参照されているため、特別な目的なく、それらを変更することは推奨されません。

本アプリケーションはワークスペースとして新規フォルダを作戦しません。新規フォルダをワークスペースとして利用したい場合、本アプリケーション外で予め新規フォルダを作成後、そのフォルダをワークスペースとして選択する必要があります。

## ダイアグラムファイル
ダイアグラムデータは`diagram.folly`の名前を持つファイルとして保存されます。  
ダイアグラムファイルは全シートの概要データを含みます。

## シートファイル
各シートは`[sheet id].folly`の名前を持つシートとしてそれぞれ保存されます。シートIDは、シートを開いたときのURLクエリ`sheet=[sheet id]`から確認可能です。  
シートファイルはシート内のシェイプデータを含みます。

現状、アプリケーション内でシートを削除してもシートファイルは削除されません。

シートファイルをアプリケーション内で他のシートへドロップすることで、シェイプをインポートすることが可能です。  
この操作は他ダイアグラムのシートに対しても可能ですが、アセットファイルは移植されません。
そのケースでは[Folly SVGとしてエクスポート](/export.html#export-as-folly-svg)が有用です。

## アセットフォルダー
ダイアグラム内で利用されてきた全てのアセットファイルは`assets`フォルダに保存されます。

アセットファイルはダイアグラム内で利用されなくなったとしても自動的には削除されません。これは主にヒストリー機能の要請によるものです。  
現状、ダイアグラム内で利用されなくなったアセットファイルを識別する良い方法はありません。

## ワークスペースなし
ワークスペースなしでダイアグラムを作成することも可能ですが、ワークスペースを選択しないままページを離脱すると全ての変更は失われます。  
ワークスペースが選択されていない場合、アセットファイルを利用することはできません。

## ファイルフォーマット
`diagram.folly`と`[sheet id].folly`ファイルは[Yjs](https://docs.yjs.dev/)が提供するバイナリフォーマットで構成されています。
