# ラインアタッチメント

## 有効 / 無効
設定パネルからラインアタッチメントの有効 / 無効を切り替えることが可能です。

![](/assets/setting-panel.png)

シェイプの移動中に`a`キーを押すことでも切り替えが可能です。

## シェイプをラインにアタッチ
移動中のシェイプのアンカーポイントがラインに近づくと、そのシェイプがラインにアタッチされます。  
デフォルトではシェイプの中心がアンカーポイントになります。

![](/assets/shape-line-attachment.png)

アタッチされているシェイプの移動中に、カーソルが円形範囲外に出るとアタッチが解除されます。

## プロパティ
アタッチされているシェイプは、その挙動を調整するためのプロパティを持ちます。プロパティはキャンバス上で直接操作、あるいはインスペクターパネルにて変更することが可能です。

![](/assets/shape-line-attachment-inspector.png)

### レート
`Rate`はライン上のどこにシェイプがアタッチするかを決定します。値はラインの始点から終点までの長さの比率を表します。

### 回転
`Relative`値がオンの場合、シェイプはラインに沿って回転します。また、ラインに沿った角度を基準とした相対的な角度を`Angle`にて変更可能です。

![](/assets/shape-line-attachment-relative.png)

### アンカーポイント
アンカーポイントはシェイプのどこを基準としてラインにアタッチするかを決定します。アンカーポイントはアタッチされたシェイプを`Shift + Drag`することでも変更可能です。

![](/assets/shape-line-attachment-anchor.png)

## 注意点
この機能は非常に万能で、シェイプとライン双方向のアタッチを組み合わせることで複雑な依存関係を作ることが可能です。しかしその複雑性から、いくつかの注意点が存在します。

<video controls="controls" muted src="/assets/shape-line-attachment-magic-circle.mp4" />

### 循環依存
循環依存が存在する場合、そのグループの位置調整結果は不定なものとなる可能性があります。

### パフォーマンス
依存関係が深く複雑になるにつれ、アプリケーションのパフォーマンスが劣化する可能性があります。
